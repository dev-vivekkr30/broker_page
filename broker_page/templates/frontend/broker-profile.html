{% load static %}
{% load broker_filters %}
{% url 'broker_profile' slug=broker|profile_slug as profile_url %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Page | Broker.Page</title>
    <!-- BootStrap Links -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

       
    <!-- Animate JS CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <style>
        table td{
            background-color: transparent !important;
        }
    </style>
</head>

<body>
    <!-- Profile CTA Mobile -->
    <div class="profile-cta-mob wow animate__animated animate__fadeIn">
        <div class="call-cta d-flex justify-content-start align-items-center gap-2">
            <a href="tel:{{ broker.mobile }}" class="primary-btn"><img class="me-1" src="{% static 'images/white-call.svg' %}" alt="">
                Call</a>
            {% if broker.whatsapp %}
            <a href="https://wa.me/{{ broker.whatsapp }}" class="secondary-btn p-0 p-2 d-flex justify-content-center align-items-center me-1"><img
                    src="{% static 'images/lined-whatsapp.svg' %}" alt=""></a>
            {% endif %}
        </div>
        <div class="social-icons d-flex justify-content-between align-items-center gap-1">
            {% if broker.facebook_url %}<a href="{{ broker.facebook_url }}" target="_blank"><img src="{% static 'images/facebook-c.svg' %}" alt=""></a>{% endif %}
            {% if broker.instagram_url %}<a href="{{ broker.instagram_url }}" target="_blank"><img src="{% static 'images/instagram-c.svg' %}" alt=""></a>{% endif %}
            {% if broker.linkedin_url %}<a href="{{ broker.linkedin_url }}" target="_blank"><img src="{% static 'images/linkedin-c.svg' %}" alt=""></a>{% endif %}
            {% if broker.youtube_url %}<a href="{{ broker.youtube_url }}" target="_blank"><img src="{% static 'images/youtube-c.svg' %}" alt=""></a>{% endif %}
            {% if broker.profile_video %}<a href="#" data-bs-toggle="modal" data-bs-target="#videoModal"><img src="{% static 'images/videosvg.svg' %}" alt=""></a>{% endif %}
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="videoModal" tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true">
        <div class="modal-dialog bg-transparent border-0">
        <div class="modal-content bg-transparent border-0">
            <div class="modal-body border-0">
                {% if broker.profile_video %}
                <video width="100%" style="border-radius: 16px;" height="auto" controls>
                    <source src="{{ broker.profile_video.url }}" type="video/mp4">
                    <source src="video.webm" type="video/webm">
                    Your browser does not support the video tag.
                </video>
                {% endif %}
            </div>
        </div>
        </div>
    </div>

    <div class="container-fluid p-0">

        <div class="navbar wow animate__animated animate__fadeIn">
            <div class="container">
                <div class="d-flex align-items-center">
                    <a class="navbar-brand" href="{% url 'home' %}"><img src="{% static 'images/logo.svg' %}" alt=""></a>
                    <div class="user-name-mob">
                        <h6 class="fw-semibold m-0 ps-2 border-start">{{ broker.full_name }} <span>
                            {% if verification_status.name %}<img style="max-width: 16px; margin-left: 8px;" src="{% static 'images/tick.svg' %}" alt="">{% else %}<img style="max-width: 16px; margin-left: 8px;" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                        </span></h6>
                    </div>
                </div>
                <!-- mobile Menu -->
                <button class="bg-transparent mobile-menu border-0" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions"><img
                        src="{% static 'images/menu.svg' %}" alt=""></button>

                <div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
                    aria-labelledby="offcanvasWithBothOptionsLabel">
                    <div class="offcanvas-header p-0 p-3">
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body pt-0">
                        <div class="trans-bg">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-building-fill"></i>
                                    <span>Address</span>
                                </div>
                                <p class="m-0 mt-1 small">{{ broker.office_address }}</p>
                                {% if broker.google_maps_url %}<a href="{{ broker.google_maps_url }}" class="text-primary small" target="_blank"><u>View Google Map location</u></a>{% endif %}
                            </div>
                        </div>
                        <div class="trans-bg">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-telephone-fill"></i>
                                    <span>Office Number</span>
                                </div>
                                <a href="tel:{{ broker.mobile }}" class="m-0 mt-1 small">{{ broker.mobile }}</a>
                            </div>
                        </div>
                        <div class="trans-bg">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-envelope-paper-fill"></i>
                                    <span>Email</span>
                                </div>
                                <a href="mailto:{{ broker.email }}" class="m-0 mt-1 small">{{ broker.email }}</a>
                            </div>
                        </div>
                        {% if broker.website %}
                        <div class="trans-bg">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-globe"></i>
                                    <span>Broker's Website</span>
                                </div>
                                <a href="{{ broker.website }}" class="m-0 mt-1 small" target="_blank">{{ broker.website }}</a>
                            </div>
                        </div>
                        {% endif %}
                        <div class="trans-bg border-0">
                            <div class="social-icons d-flex justify-content-start align-items-center gap-1">
                                {% if broker.facebook_url %}<a href="{{ broker.facebook_url }}" target="_blank"><img src="{% static 'images/facebook-c.svg' %}" alt=""></a>{% endif %}
                                {% if broker.instagram_url %}<a href="{{ broker.instagram_url }}" target="_blank"><img src="{% static 'images/instagram-c.svg' %}" alt=""></a>{% endif %}
                                {% if broker.linkedin_url %}<a href="{{ broker.linkedin_url }}" target="_blank"><img src="{% static 'images/linkedin-c.svg' %}" alt=""></a>{% endif %}
                                {% if broker.youtube_url %}<a href="{{ broker.youtube_url }}" target="_blank"><img src="{% static 'images/youtube-c.svg' %}" alt=""></a>{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="profile-row-mob wow animate__animated animate__fadeIn">
            <div class="trans-bg m-0 border-0"></div>
            <div style="position: relative;">
                {% if verification_status.photo %}<img class="profile-tick" src="{% static 'images/tick-2.svg' %}" alt="">{% else %}<img class="profile-tick" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                <div class="profile-photo">
                    {% if broker.profile_photo %}<img src="{{ broker.profile_photo.url }}" alt="">{% else %}<img src="{% static 'images/userDefaultimage.svg' %}" alt="">{% endif %}
                </div>
            </div>
        </div>

        <!-- Profile Page Section -->
        <div class="container">

            <div class="row mt-4">
                <div class="col-md-5 profile-col ">
                    <div class="profile-left wow animate__animated animate__fadeIn">
                        <div id="carouselExample" class="carousel slide">
                            <div class="carousel-inner">
                              <div class="carousel-item active">
                                <div class="profile-photo-thumbnail">
                                    {% if broker.profile_photo %}<img src="{{ broker.profile_photo.url }}" alt="">{% else %}<img src="{% static 'images/userDefaultimage.svg' %}" alt="">{% endif %}
                                    {% if verification_status.photo %}<img class="verifed-badge" src="{% static 'images/verifed-badge.svg' %}" alt="">{% else %}<img class="verifed-badge" src="{% static 'images/not-verified-badge.svg' %}" alt="">{% endif %}
                                </div>
                              </div>
                              {% if broker.profile_video %}
                              <div class="carousel-item">
                                <video width="100%" style="border-radius: 16px;" height="auto" controls>
                                    <source src="{{ broker.profile_video.url }}" type="video/mp4">
                                    <source src="video.webm" type="video/webm">
                                    Your browser does not support the video tag.
                                </video>
                              </div>
                              {% endif %}
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>
                        
                        <div class="profile-cta wow animate__animated animate__fadeIn d-flex justify-content-between align-items-center mt-3">
                            <div class="call-cta d-flex justify-content-start align-items-center gap-2">
                                <a href="tel:{{ broker.mobile }}" class="primary-btn"><img class="me-1" src="{% static 'images/white-call.svg' %}" alt="">{{ broker.mobile }}</a>
                                {% if broker.whatsapp %}<a href="https://wa.me/{{ broker.whatsapp }}" class="secondary-btn p-0 p-2 d-flex justify-content-center align-items-center me-1"><img src="{% static 'images/lined-whatsapp.svg' %}" alt=""></a>{% endif %}
                            </div>
                            <div class="social-icons d-flex justify-content-between align-items-center gap-1">
                                <a href="#" class="share-btn"><img src="{% static 'images/share.svg' %}" alt=""></a>
                                {% if broker.facebook_url %}<a href="{% if broker.facebook_url|slice:':4' == 'http' %}{{ broker.facebook_url }}{% else %}https://{{ broker.facebook_url }}{% endif %}" target="_blank"><img src="{% static 'images/facebook-c.svg' %}" alt=""></a>{% endif %}
                                {% if broker.instagram_url %}<a href="{% if broker.instagram_url|slice:':4' == 'http' %}{{ broker.instagram_url }}{% else %}https://{{ broker.instagram_url }}{% endif %}" target="_blank"><img src="{% static 'images/instagram-c.svg' %}" alt=""></a>{% endif %}
                                {% if broker.linkedin_url %}<a href="{% if broker.linkedin_url|slice:':4' == 'http' %}{{ broker.linkedin_url }}{% else %}https://{{ broker.linkedin_url }}{% endif %}" target="_blank"><img src="{% static 'images/linkedin-c.svg' %}" alt=""></a>{% endif %}
                                {% if broker.youtube_url %}<a href="{% if broker.youtube_url|slice:':4' == 'http' %}{{ broker.youtube_url }}{% else %}https://{{ broker.youtube_url }}{% endif %}" target="_blank"><img src="{% static 'images/youtube-c.svg' %}" alt=""></a>{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-7">
                    <div class="profile-right">
                        <div class="blue-bg wow animate__ animate__fadeIn user-name-card">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-person-fill"></i>
                                    <span>Name</span>
                                </div>
                                <h4 class="m-0 fw-bold mt-1">{{ broker.full_name }}</h4>
                            </div>
                            {% if verification_status.name %}<img class="verifed-icon" src="{% static 'images/tick.svg' %}" alt="">{% else %}<img class="verifed-icon" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                        </div>
                        {% if broker.company %}
                        <div class="blue-bg wow animate__ animate__fadeIn">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-building-fill"></i>
                                    <span>Company Name</span>
                                </div>
                                <p class="m-0 mt-1">{{ broker.company }}</p>
                            </div>
                            {% if verification_status.company %}<img class="verifed-icon" src="{% static 'images/tick.svg' %}" alt="">{% else %}<img class="verifed-icon" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                        </div>
                        {% endif %}
                        <div class="row">
                            {% if broker.age %}
                            <div class="col-md-6">
                                <div class="blue-bg wow animate__ animate__fadeIn">
                                    <div class="user-name">
                                        <div class="label">
                                            <i class="bi bi-person-arms-up"></i>
                                            <span>Age</span>
                                        </div>
                                        <p class="m-0 mt-1">{{ broker.age }} Years</p>
                                    </div>
                                    {% if verification_status.age %}<img class="verifed-icon" src="{% static 'images/tick.svg' %}" alt="">{% else %}<img class="verifed-icon" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                                </div>
                            </div>
                            {% endif %}
                            {% if broker.education %}
                            <div class="col-md-6">
                                <div class="blue-bg wow animate__ animate__fadeIn">
                                    <div class="user-name">
                                        <div class="label">
                                            <i class="bi bi-mortarboard-fill"></i>
                                            <span>Education</span>
                                        </div>
                                        <p class="m-0 mt-1">{{ broker.education }}</p>
                                    </div>
                                    {% if verification_status.education %}<img class="verifed-icon" src="{% static 'images/tick.svg' %}" alt="">{% else %}<img class="verifed-icon" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                                </div>
                            </div>
                            {% endif %}
                            {% if broker.office_address %}
                            <div class="col-md-6">
                                <div class="blue-bg wow animate__ animate__fadeIn">
                                    <div class="user-name">
                                        <div class="label">
                                            <i class="bi bi-building-fill"></i>
                                            <span>Office Address</span>
                                        </div>
                                        <p class="m-0 mt-1 small">{{ broker.office_address }}</p>
                                    </div>
                                    {% if verification_status.office %}<img class="verifed-icon" src="{% static 'images/tick.svg' %}" alt="">{% else %}<img class="verifed-icon" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                                </div>
                            </div>
                            {% endif %}
                            {% if broker.residence_colony %}
                            <div class="col-md-6">
                                <div class="blue-bg wow animate__ animate__fadeIn">
                                    <div class="user-name">
                                        <div class="label">
                                            <i class="bi bi-house-fill"></i>
                                            <span>Residence Colony</span>
                                        </div>
                                        <p class="m-0 mt-1 small">{{ broker.residence_colony }}</p>
                                    </div>
                                    {% if verification_status.residence %}<img class="verifed-icon" src="{% static 'images/tick.svg' %}" alt="">{% else %}<img class="verifed-icon" src="{% static 'images/not_verified.svg' %}" alt="">{% endif %}
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="other-details mt-2">
                {% if broker.about %}
                <div class="gray-bg wow animate__ animate__fadeIn">
                    <div class="user-name">
                        <div class="label">
                            <i class="bi bi-info-circle-fill"></i>
                            <span>About Me</span>
                        </div>
                        <p class="m-0 mt-1 small">{{ broker.about }}</p>
                    </div>
                </div>
                {% endif %}
                <div class="row">
                    {% if broker.expertise %}
                    <div class="col-md-6">
                        <div class="gray-bg wow animate__ animate__fadeIn">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-bookmark-star-fill"></i>
                                    <span>Expertise</span>
                                </div>
                                <div class="m-0 mt-2 tags-list">
                                    {% for tag in expertise_list %}
                                        {% if tag %}<span class="tag">{{ tag }}</span>{% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% if broker.listings %}
                    <div class="col-md-6">
                        <div class="gray-bg wow animate__ animate__fadeIn">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-list-ul"></i>
                                    <span>Broker's Listings / Mandates</span>
                                </div>
                                <div class="m-0 mt-2 tags-list">
                                    {% for listing in listings_list %}
                                        {% if listing %}<span class="tag">{{ listing }}</span>{% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
                <div class="row">
                    {% if broker.min_deal_size or broker.max_deal_size %}
                    <div class="col-md-4">
                        <div class="gray-bg wow animate__ animate__fadeIn">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-currency-rupee"></i>
                                    <span>Average Deal Size</span>
                                </div>
                                <p class="m-0 mt-1 small">{{ broker.min_deal_size }}{% if broker.min_deal_size and broker.max_deal_size %} to {% endif %}{{ broker.max_deal_size }}</p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% if broker.website %}
                    <div class="col-md-4">
                        <div class="gray-bg wow animate__ animate__fadeIn">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-globe"></i>
                                    <span>Broker's Website</span>
                                </div>
                                <p class="m-0 mt-1 small"><a href="{{ broker.website }}" target="_blank">{{ broker.website }}</a></p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    {% if achievements_list %}
                    <div class="col-md-4">
                        <div class="gray-bg wow animate__ animate__fadeIn">
                            <div class="user-name">
                                <div class="label">
                                    <i class="bi bi-star-fill"></i>
                                    <span>Achievements</span>
                                </div>
                                <div class="m-0 mt-2 tags-list">
                                    {% for achievement in achievements_list %}
                                        {% if achievement %}<span class="tag">{{ achievement }}</span>{% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% if colonies_list %}
                <div class="gray-bg wow animate__ animate__fadeIn">
                    <div class="user-name">
                        <div class="label">
                            <i class="bi bi-geo-alt-fill"></i>
                            <span>Active Colonies/Areas</span>
                        </div>
                        <div class="m-0 mt-2 tags-list">
                            {% for colony in colonies_list %}
                                {% if colony %}<span class="tag">{{ colony }}</span>{% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>


        <!-- Footer Section -->
        <footer class="container-fluid">
            <div class="container">
                <div class="footerSection">
                    <a href="{% url 'home' %}"><img src="{% static 'images/logo.svg' %}" alt=""></a>
                    <div class="footer-col">
                        <div>
                            <h6>Quick Link</h6>
                            <div class="footer-list">
                                <a href="#">About</a>
                                <a href="#">Contact</a>
                            </div>
                        </div>
                        <div>
                            <h6>Company</h6>
                            <div class="footer-list">
                                <a href="#">Privacy Policy</a>
                                <a href="#">Terms & Conditions</a>
                            </div>
                        </div>
                        <div>
                            <a href="mailto:info@broker.page" class="text-white mb-2"><img src="{% static 'images/red-mail.svg' %}" alt="">
                                info@broker.page</a>
                            <a href="tel:+919876543210" class="text-white"><img src="{% static 'images/red-call.svg' %}" alt=""> +91 9876543210</a>
                        </div>
                    </div>
                </div>
                <div class="copyright">
                    <p class="m-0">Copyright Â© {% now "Y" %} Broker.Page. All rights reserved.</p>
                    <p class="m-0">Reg No. DEL / 1025 / 05 / 2025</p>
                    <div class="social-media d-flex gap-2">
                        <a href="#"><img src="{% static 'images/facebook.svg' %}" alt=""></a>
                        <a href="#"><img src="{% static 'images/insta.svg' %}" alt=""></a>
                        <a href="#"><img src="{% static 'images/twitter.svg' %}" alt=""></a>
                        <a href="#"><img src="{% static 'images/linkedin.svg' %}" alt=""></a>
                    </div>
                </div>
            </div>

        </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <!-- Jquery JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        // Initialize Select2
        $('.select2').select2({
            maximumSelectionLength: 30,
            placeholder: 'Select colonies',
            tags: true,
            width: '100%'
        });
    </script>
    <script>
    var baseUrl = "{{ request.scheme }}://{{ request.get_host }}";
    var profileUrl = baseUrl + "{{ profile_url }}";
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.share-btn').forEach(function(shareBtn) {
            shareBtn.addEventListener('click', function(e) {
                e.preventDefault();
                navigator.clipboard.writeText(profileUrl).then(function() {
                    let msg = document.createElement('div');
                    msg.innerText = 'Link Copied!';
                    msg.style.position = 'fixed';
                    msg.style.top = '20px';
                    msg.style.right = '20px';
                    msg.style.background = '#ffebeb';
                    msg.style.color = '#fd3837';
                    msg.style.padding = '10px 20px';
                    msg.style.borderRadius = '6px';
                    msg.style.border = '1px solid #fd3837';
                    msg.style.zIndex = 9999;
                    document.body.appendChild(msg);
                    setTimeout(function() { msg.remove(); }, 1500);
                });
            });
        });
    });
    </script>
</body>
</html>